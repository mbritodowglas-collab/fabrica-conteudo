---
---
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>{{ page.title }} · Dowglas Universe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">

  <style>
    :root {
      color-scheme: dark;
    }

    body.du-body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #e5e5e5;
      background: #000; /* fallback */
      overflow-x: hidden;
    }

    .du-main {
      width: 100%;
      max-width: 1080px;
      margin: 0 auto;
    }

    .du-slides {
      width: 100%;
    }

    /* Cada QUADRO (slide) do Universe */
    .du-block {
      min-height: 100vh;
      width: 100%;
      padding: clamp(1.5rem, 4vw, 2.5rem);
      display: flex;
      justify-content: center;
      align-items: center;
      box-sizing: border-box;

      background-image: url('{{ "/assets/img/dowglas-universe.jpg" | relative_url }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    .du-card {
      width: 100%;
      max-width: 760px;
      margin: 0 auto;
      padding: clamp(1.75rem, 4vw, 2.5rem);
      border-radius: 1.25rem;
      background: radial-gradient(circle at top, rgba(0,0,0,0.65), rgba(0,0,0,0.9));
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      backdrop-filter: blur(4px);
      box-sizing: border-box;
    }

    .du-title {
      font-size: clamp(1.7rem, 2.3rem, 2.6rem);
      line-height: 1.15;
      margin: 0 0 0.45rem 0;
      letter-spacing: 0.04em;
    }

    .du-subtitle {
      margin: 0;
      font-size: 0.95rem;
      opacity: 0.85;
    }

    .du-header {
      margin-bottom: 1.4rem;
    }

    .du-content {
      font-size: 1.05rem;
      line-height: 1.65;
      letter-spacing: 0.01em;
    }

    .du-content p {
      margin: 0 0 1rem 0;
    }

    .du-content ul {
      margin: 0 0 1rem 0;
      padding-left: 1.2rem;
    }

    .du-block-title {
      font-size: 1.25rem;
      margin: 0 0 0.9rem 0;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .du-footer-text {
      margin-top: 1.6rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(255,255,255,0.08);
      font-size: 0.98rem;
      opacity: 0.9;
    }

    /* BLOCO CTA COM PERFIL (estilo twitter) */
    .du-block--cta .du-card {
      max-width: 640px;
    }

    .du-profile-row {
      display: flex;
      align-items: center;
      margin-bottom: 0.9rem;
    }

    .fc-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      overflow: hidden;
      background: rgba(0,0,0,0.6);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-right: 0.75rem;
      flex-shrink: 0;
    }

    .fc-avatar__img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .fc-avatar__text {
      font-weight: 600;
      font-size: 1.1rem;
      text-transform: uppercase;
    }

    .fc-static-user {
      display: inline-flex;
      flex-direction: column;
      justify-content: center;
    }

    .fc-static-user__name {
      font-size: 0.98rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .fc-static-user__handle {
      font-size: 0.85rem;
      opacity: 0.8;
    }

    .fc-verified-badge {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 2px solid #1da1f2;
      box-sizing: border-box;
      display: inline-block;
    }

    .du-cta-text {
      font-size: 1.02rem;
      line-height: 1.6;
    }

    /* Botão global de download */
    .fc-download-fixed {
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 9999;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      border: 0;
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
      font-size: 0.9rem;
      cursor: pointer;
      backdrop-filter: blur(6px);
    }
  </style>
</head>

<body class="du-body">

  <!-- Botão de download em PNG (um arquivo por quadro) -->
  <button id="download-universe" class="fc-download-fixed" type="button">↓ PNG</button>

  {%- comment -%}
    Nome / iniciais / avatar para o quadro de perfil tipo Twitter.
  {%- endcomment -%}
  {%- assign nome = page.autor_nome | default: page.perfil | default: 'Dowglas Universe' -%}
  {%- assign partes = nome | split: ' ' -%}
  {%- assign p1 = partes[0] | slice: 0,1 -%}
  {%- assign p2 = '' -%}
  {%- if partes.size > 1 -%}
    {%- assign p2 = partes[1] | slice: 0,1 -%}
  {%- endif -%}
  {%- assign iniciais = p1 | append: p2 -%}

  {%- assign cta_profile_text = page.cta_profile_text | default: "
Se esse multiverso fez sentido pra você, me segue, deixa um comentário
com o que mais falou contigo e curte esse post pra eu saber que fez sentido.
" -%}

  <main class="du-main">
    <section class="du-slides">

      {% if page.blocos %}
        {%- comment -%}
          MODO MULTIQUADROS: cada item de "blocos:" vira um slide.
        {%- endcomment -%}
        {% for b in page.blocos %}
          <section class="du-block du-block--content slide">
            <article class="du-card">
              {% if forloop.first %}
                <header class="du-header">
                  <h1 class="du-title">{{ page.title }}</h1>
                  {% if page.tagline or page.subtitulo %}
                    <p class="du-subtitle">
                      {{ page.tagline | default: page.subtitulo }}
                    </p>
                  {% endif %}
                </header>
              {% endif %}

              <section class="du-content">
                {% if b.titulo %}
                  <h2 class="du-block-title">{{ b.titulo }}</h2>
                {% endif %}
                {% if b.texto %}
                  {{ b.texto | markdownify }}
                {% endif %}
              </section>
            </article>
          </section>
        {% endfor %}

        {% if page.show_profile_cta %}
          <section class="du-block du-block--cta slide">
            <article class="du-card">
              <div class="du-profile-row">
                <div class="fc-avatar">
                  {% if page.avatar %}
                    <img src="{{ page.avatar | relative_url }}" alt="{{ nome }}" class="fc-avatar__img">
                  {% else %}
                    <span class="fc-avatar__text">{{ iniciais | upcase }}</span>
                  {% endif %}
                </div>
                <div class="fc-static-user">
                  <div class="fc-static-user__name">
                    {{ nome }}
                    {% if page.verificado %}
                      <span class="fc-verified-badge" title="Verificado"></span>
                    {% endif %}
                  </div>
                  {% if page.autor_handle %}
                    <div class="fc-static-user__handle">{{ page.autor_handle }}</div>
                  {% endif %}
                </div>
              </div>

              <div class="du-cta-text">
                {{ cta_profile_text | markdownify }}
              </div>
            </article>
          </section>
        {% endif %}

      {% else %}
        {%- comment -%}
          MODO TEXTÃO ÚNICO: 1 slide com o texto + opcional 2º slide de CTA.
        {%- endcomment -%}
        <section class="du-block du-block--single slide">
          <article class="du-card">
            <header class="du-header">
              <h1 class="du-title">{{ page.title }}</h1>
              {% if page.tagline or page.subtitulo %}
                <p class="du-subtitle">
                  {{ page.tagline | default: page.subtitulo }}
                </p>
              {% endif %}
            </header>

            <section class="du-content">
              {{ content | markdownify }}
            </section>

            {% if page.cta or page.fechamento %}
              <div class="du-footer-text">
                {% if page.fechamento %}
                  {{ page.fechamento | markdownify }}
                {% endif %}
                {% if page.cta %}
                  {{ page.cta | markdownify }}
                {% endif %}
              </div>
            {% endif %}
          </article>
        </section>

        {% if page.show_profile_cta %}
          <section class="du-block du-block--cta slide">
            <article class="du-card">
              <div class="du-profile-row">
                <div class="fc-avatar">
                  {% if page.avatar %}
                    <img src="{{ page.avatar | relative_url }}" alt="{{ nome }}" class="fc-avatar__img">
                  {% else %}
                    <span class="fc-avatar__text">{{ iniciais | upcase }}</span>
                  {% endif %}
                </div>
                <div class="fc-static-user">
                  <div class="fc-static-user__name">
                    {{ nome }}
                    {% if page.verificado %}
                      <span class="fc-verified-badge" title="Verificado"></span>
                    {% endif %}
                  </div>
                  {% if page.autor_handle %}
                    <div class="fc-static-user__handle">{{ page.autor-handle }}</div>
                  {% endif %}
                </div>
              </div>

              <div class="du-cta-text">
                {{ cta_profile_text | markdownify }}
              </div>
            </article>
          </section>
        {% endif %}
      {% endif %}

    </section>
  </main>

  <!-- HTML2Canvas -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('download-universe');
      const slides = Array.from(document.querySelectorAll('.du-block'));

      if (!btn || !slides.length) return;

      btn.addEventListener('click', async () => {
        const baseTitle = (document.title || 'dowglas-universe')
          .replace(/· Dowglas Universe/i, '')
          .trim()
          .toLowerCase()
          .replace(/[^\w]+/g, '-')
          || 'dowglas-universe';

        for (let i = 0; i < slides.length; i++) {
          const slide = slides[i];

          slide.scrollIntoView({ behavior: 'auto', block: 'center' });

          const canvas = await html2canvas(slide, {
            scale: 2,
            backgroundColor: null,
            useCORS: true
          });

          const num = String(i + 1).padStart(2, '0');
          const filename = `${baseTitle}-slide-${num}.png`;

          const link = document.createElement('a');
          link.download = filename;
          link.href = canvas.toDataURL('image/png');
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }
      });
    });
  </script>

</body>
</html>